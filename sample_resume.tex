% !TEX encoding = UTF-8 Unicode

\documentclass[letterpaper,12pt]{article}

%A Few Useful Packages
%\usepackage{marvosym}
\usepackage{fontspec}     %for loading fonts
\usepackage{xunicode,xltxtra,url,parskip} 	%other packages for formatting
\usepackage{graphicx}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage[left=1.3cm,
            top=1.2cm,
            right=1.3cm,
            bottom=1.2cm,
            nohead,
            nofoot
            ]{geometry}
\usepackage{tabularx}
\usepackage{titlesec}
%\usepackage{tabto}        % tab spacing

\usepackage{setspace}     % line spacing
\usepackage{booktabs,colortbl}       % thicker rules between table cells
\usepackage{bibentry}     % bibliography

% SORTED LISTS
\usepackage{paralist}
\usepackage{datatool}% http://ctan.org/pkg/datatool
\newcommand{\sortitem}[1]{%
  \DTLnewrow{list}% Create a new entry
  \DTLnewdbentry{list}{description}{#1}% Add entry as description
}
\newenvironment{sortedlist}{%
  \DTLifdbexists{list}{\DTLcleardb{list}}{\DTLnewdb{list}}% Create new/discard old list
}{%
  \DTLsort{description}{list}% Sort list
  \begin{inparaitem}[]%
    \DTLforeach*{list}{\theDesc=description}{%
      \item \theDesc, }% Print each item
  \end{inparaitem}%
}

%Setup hyperref package, and colours for links
\usepackage[colorlinks,
            breaklinks,
            pagebackref=false,
            debug=true,
            xetex,
            bookmarks=false,
            pdfpagelabels=false,
            hyperfootnotes=false,
            hyperindex=false,
            pageanchor=false]{hyperref}
\definecolor{linkcolor}{gray}{0.2}
\hypersetup{
  pdfauthor={Isaac Newton},
  pdfsubject={Isaac Newton - Resume},
  pdftitle={Isaac Newton - Resume},
  urlcolor=linkcolor,
  linkcolor=linkcolor
}

% colors
\definecolor{dark-gray}{gray}{0.15}
\definecolor{light-gray}{gray}{0.55}

%FONTS
\setmainfont{Helvetica}
\newfontfamily{\hlight}[UprightFont={* Light}]{Helvetica}
%\defaultfontfeatures{Mapping=tex-text} % converts LaTeX specials (``quotes'' --- dashes etc.) to unicode
\defaultfontfeatures{
    Path = /usr/local/texlive/2017/texmf-dist/fonts/opentype/public/fontawesome/ }
\usepackage{fontawesome}  % glyphs for contact info

% CUSTOM COMMANDS
  \newcommand{\titlerulethick}{{%
    {\color{dark-gray} \titlerule[0.7mm] }%
  }}

  % old section title format
  \titleformat{\section}{\fontsize{34pt}{40pt}\color{dark-gray}\normalfont}{}{0mm}{}[\titlerulethick]
  %\titlespacing{\section}{0pt}{3pt}{3pt}

  \newcommand{\namefont}[1]{{%
    \fontsize{42pt}{50pt}\normalfont\textbf{#1}%
  }}

  \newcommand{\spacerule}{
    \addlinespace[0.5em]
    \midrule[0.5mm]
    \addlinespace[0.5em]
  }

  \newcommand{\bigfont}[1]{{%
    \fontsize{32pt}{38pt}\normalfont{#1} %
  }}

  \newcommand{\lightfont}[1]{{%
    {\hlight\color{light-gray}#1}
  }}

  \newcommand{\contactinfo}{%
    {\hlight\color{dark-gray}}
  }

  \newcommand{\lightsmall}[1]{{%
    {\fontsize{11pt}{14pt}\hlight\color{light-gray}#1}
  }}

  \newcommand{\pubstyle}[1]{{%
    {\fontsize{10pt}{13pt}\hlight\color{light-gray}#1}
  }}

  \newcommand{\lightbf}[1]{{%
    \textbf{\lightfont{#1}}
  }}

  \newcommand{\emphasized}[1]{{%
    {\fontsize{14pt}{18pt}\textbf{#1}}
  }}

  \newcommand{\position}[1]{{%
    {\fontsize{14pt}{18pt} \hlight{#1}}
  }}

  \newcommand{\company}[1]{{%
    {\fontsize{14pt}{18pt} \textbf{#1}}
  }}

  \newcommand{\headline}{
    {\fontsize{14pt}{17pt}\bfseries\color{dark-gray}Natural Philosopher}
  }

  \newcommand{\name}{
    \raggedright\fontsize{42pt}{42pt}\bfseries\flushleft\color{dark-gray}{Isaac Newton}
  }

  \newcommand{\lighthrule}{
    {\color{light-gray}\par\rule[0mm]{\hsize}{0.5mm}\par\vspace{0.5em}}
  }

  \newcommand\Mybox[1]{%
    \setlength\fboxsep{0pt}\fcolorbox{red}{white}{#1}
  }

% hack to remove bibliography numbering
\makeatletter
\renewcommand\@biblabel[1]{}
\renewenvironment{thebibliography}[1]
     {\section*{\refname}%
      \@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}%
      \list{}%
           {\leftmargin0pt
            \@openbib@code
            \usecounter{enumiv}}%
      \sloppy
      \clubpenalty4000
      \@clubpenalty \clubpenalty
      \widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}
\makeatother
%
%
%
%
%
%
%
%
%
%-------------------- BEGIN DOCUMENT ----------------------
\begin{document}
\nocite{}
\pagestyle{empty} % non-numbered pages
\font\fb=''[cmr10]'' %for use with \LaTeX command
%---------- SPECIFY LENGTHS ----------
\newlength{\leftwide}
\setlength{\leftwide}{0.34\textwidth}
%
\newlength{\centerwide}
\setlength{\centerwide}{0.33\textwidth}
%
\newlength{\rightwide}
\setlength{\rightwide}{0.28\textwidth}
%---------- TOP SECTION ----------
\begin{tabular}[b]{@{}p{\leftwide}@{}p{\centerwide}@{}p{\rightwide}@{}}
  % NAME (left)
  \noindent
  \begin{minipage}[b]{\leftwide}
    \name
  \end{minipage} & %
  %
  % HEADLINE (middle)
  \begin{minipage}[b]{\centerwide}
    \parbox[b][][b]{4.5cm}{\raggedright\headline}
  \end{minipage} & %
  %
  % CONTACT INFO (right)
  \begin{minipage}[b]{\rightwide}
    \renewcommand\arraystretch{1.25}
    \contactinfo
    \begin{tabular}[b]{@{}cl@{}}
      \faEnvelopeO & \href{mailto:isaac.newton@trin.cam.ac.uk}{isaac.newton@trin.cam.ac.uk}\\ %{}
      \faPhone & +44 1223 338400\\
      \faLinkedin & \href{http://www.linkedin.com/in/isaacnewton}{in/isaacnewton}
    \end{tabular}
  \end{minipage}
\end{tabular}
\lighthrule
%---------- MAIN BODY ----------
%---------- LEFT SIDE ----------
%\Mybox{
\begin{minipage}[t]{0.31\textwidth}
  \raggedright
  \begin{flushleft}
  % ABOUT
  \section{about}
  \parbox[t][][t]{\textwidth}{
    \lightsmall{
    \begin{flushleft}
      I invented calculus and gravity. I also wrote a few important papers on
      optics, planetary motion, and math.
    \end{flushleft}
    }
  }
%
%
% EDUCATION
\section{education}
%
%\setlength{\parskip}{1mm}
    \lightbf{1667} \\
    \smallskip
    \emphasized{MA} \\
    \emphasized{Mathematics and Physics} \\
    \smallskip
    \lightfont{\textbf{Cambridge} \\
    \emph{Trinity College}} \\ %
    %
    \bigskip %
    \lightbf{1665} \\
    \smallskip
    \emphasized{BA} \\
    \emphasized{Philosophy} \\
    \smallskip
    \lightfont{\textbf{Cambridge} \\
    \emph{Trinity College}} \\ %
    %
    \bigskip %
%
%
  % SKILLS
  \section{skills}
  \hlight
  \begin{sortedlist}
        \sortitem{calculus}
        \sortitem{optics}
        \sortitem{writing papers}
        \sortitem{casual ocular needle insertion}
        \sortitem{mechanics}
        \sortitem{heliocentricity}
        \sortitem{astronomy}
        \sortitem{planetary motion}
        \sortitem{finding roots of functions}
        \sortitem{alchemy}
        \sortitem{latin}
        \sortitem{public speaking}
      \end{sortedlist}
\end{flushleft}
\end{minipage}%
%
%---------- RIGHT SIDE ----------
\newlength{\hwide}
\newlength{\hwideright}
\newlength{\buffer}
\setlength{\buffer}{4pt plus 1pt minus 1pt}
%
%
\begin{minipage}[t]{0.64\textwidth}
  \section{experience}
  %
  \setlength{\hwide}{\dimexpr.5\hsize-4\tabcolsep}
  \setlength{\hwideright}{\dimexpr\hwide+5\tabcolsep}
  %
  %  POSITIONS
  \begin{tabular}{@{}p{\hwide}p{\hwideright}}
    \arrayrulecolor{light-gray}
          \parbox[t][][t]{\hwide}{%
          \raggedright
          \company{Trinity College, Cambridge}\\
          \vspace{\buffer}
          \lightfont{%
          1669 \textendash{} 1702\\
                    \vspace{\buffer}}
                  } & %
      \parbox[t][][t]{\hwideright}{%
          \raggedright
          \position{Lucasian Professor of Mathematics}\\
          \vspace{\buffer}
          \lightsmall{Mainly mathematical sciences, but also the study of alchemy and biblical
chronology. I generalized the binomial theorem to allow real exponents
other than nonnegative integers. Also devised a method for finding
successively better approximations to the roots (or zeroes) of a
real-valued function, it's called ``Newton's method''}
        }\\
        \spacerule
          \parbox[t][][t]{\hwide}{%
          \raggedright
          \company{Trinity College}\\
          \vspace{\buffer}
          \lightfont{%
          1661 \textendash{} 1664\\
                    \vspace{\buffer}}
                  } & %
      \parbox[t][][t]{\hwideright}{%
          \raggedright
          \position{Valet}\\
          \vspace{\buffer}
          \lightsmall{Tending to my employer as his personal assistant. I was a subsizar to
help pay for studies at Trinity College.}
        }\\
        \spacerule
          \parbox[t][][t]{\hwide}{%
          \raggedright
          \company{Farm}\\
          \vspace{\buffer}
          \lightfont{%
          1659 \textendash{} 1661\\
                    \vspace{\buffer}}
                  } & %
      \parbox[t][][t]{\hwideright}{%
          \raggedright
          \position{Farmer}\\
          \vspace{\buffer}
          \lightsmall{Tedious and laborious farm work. I hated it. My mother made me do it
after my dumb step-father died again.}
        }\\
        \spacerule
      \end{tabular}
%
\section{publications}
\vspace{-0.5em}
\begingroup
\renewcommand{\section}[2]{}%
\pubstyle{
  \bibliography{pubs}
  \bibliographystyle{cvbib}
}
\endgroup
\end{minipage}
% ==========================================================
%-------------------- END OF DOCUMENT ----------------------
\end{document}
